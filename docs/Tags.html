<HTML>
<HEAD>
<TITLE>tags - Tag summary for Merge.</TITLE>
<LINK REV="made" HREF="mailto:root@porky.devel.redhat.com">
</HEAD>

<BODY>

<!-- INDEX BEGIN -->

<UL>

	<LI><A HREF="#NAME">NAME</A>
	<LI><A HREF="#DATABASE_TAGS">DATABASE TAGS</A>
	<LI><A HREF="#FLOW_TAGS">FLOW TAGS</A>
	<LI><A HREF="#FUNCTIONAL_TAGS">FUNCTIONAL TAGS</A>
	<LI><A HREF="#SOURCE_TAGS">SOURCE TAGS</A>
	<LI><A HREF="#VARIABLE_TAGS">VARIABLE TAGS</A>
	<LI><A HREF="#SECURITY_TAGS">SECURITY TAGS</A>
	<LI><A HREF="#DATE_TAGS">DATE TAGS</A>
	<LI><A HREF="#FORM_AND_HTML_ENHANCEMENT_TAGS">FORM AND HTML ENHANCEMENT TAGS</A>
	<LI><A HREF="#FILE_TAGS">FILE TAGS</A>
	<LI><A HREF="#SYNOPSIS">SYNOPSIS</A>
	<LI><A HREF="#DESCRIPTION">DESCRIPTION</A>
</UL>
<!-- INDEX END -->

<HR>
<P>
<H1><A NAME="NAME">NAME</A></H1>
<P>
Merge tags - Tag summary for Merge.

<P>
<HR>
<H1><A NAME="DATABASE_TAGS">DATABASE TAGS</A></H1>
<UL>
<LI>
<P>
&lt;$RDB='[<STRONG>Database type</STRONG>:]<STRONG>Database name</STRONG>[:<STRONG>Host</STRONG>][,<STRONG>User</STRONG>[,<STRONG>Password</STRONG>]]'&gt;



<P>
Connect to alternative database. Defaults are taken from the configuration
file. If two parameters are given in the first token, the database type
takes precedence.

<LI>
<P>
&lt;$RS='<STRONG>SQL statement</STRONG>'&gt;



<P>
Perform a non query SQL statement.

<LI>
<P>
&lt;$RQ='SELECT <STRONG>SQL statement</STRONG>'&gt;



<P>
Perform a query. First row of result is immediately available. Query can be
iterated with &lt;<CODE>$RLOOP</CODE>&gt; tags.

<LI>
<P>
&lt;<CODE>$RERUN</CODE>&gt;



<P>
Reperforms the query.

<LI>
<P>
&lt;$RLOOP[.LIMIT=<STRONG>number</STRONG>]&gt;



<P>
&lt;/$RLOOP&gt;



<P>
&lt;<CODE>$REND</CODE>&gt;



<P>
Performs a loop over fetched query elements. Last row remains valid after
iteration. Iteration number can be limited.

<LI>
<P>
&lt;$RSQL.<STRONG>variable</STRONG>&gt;



<P>
Derferences a column from the current fetch.

<LI>
<P>
&lt;<CODE>$RINDEX</CODE>&gt;



<P>
Substitues for the number of the row currently fetched.

<LI>
<P>
&lt;<CODE>$RFETCH</CODE>&gt;



<P>
Fetches another row. Increments the index.

<LI>
<P>
&lt;<CODE>$RSTATE</CODE>&gt;



<P>
Returns the SQL state of the last statement.

<LI>
<P>
&lt;<CODE>$REMPTY</CODE>&gt;



<P>
Returns a boolean value of whether the last query yielded an empty set.

<LI>
<P>
&lt;<CODE>$RDISCONNECT</CODE>&gt;



<P>
Destroy an engine. This is used if the DB_DATABASE configuration variable
has been changed using the &lt;<CODE>$RCFGSET</CODE>&gt; tag to recreate the engine with the new parameters.

</UL>
<P>
<HR>
<H1><A NAME="FLOW_TAGS">FLOW TAGS</A></H1>
<UL>
<LI>
<P>
&lt;$RITERATION.LIMIT=<STRONG>number</STRONG>&gt;



<P>
&lt;/$RITERATION&gt;



<P>
Performs a counted loop.

<LI>
<P>
&lt;$RIF.'<STRONG>perl code</STRONG>'&gt;



<P>
&lt;<CODE>$RELSE</CODE>&gt; (optional)

<P>
&lt;<CODE>$REND_IF</CODE>&gt;



<P>
&lt;/$RIF&gt;



<P>
&lt;/$RELSIF.'<STRONG>perl code</STRONG>'&gt;



<P>
Perform the code if the perl code evaluates to true.

<LI>
<P>
&lt;$RWHILE.'<STRONG>perl code</STRONG>'&gt;



<P>
&lt;/$RWHILE&gt;



<P>
&lt;<CODE>$REND_WHILE</CODE>&gt;



<P>
Perform a while loop.

<LI>
<P>
&lt;<CODE>$RBREAK</CODE>&gt;



<P>
Break out of a loop.

<LI>
<P>
&lt;<CODE>$RCONT</CODE>&gt;



<P>
Jump to the next iteration of the loop.

<LI>
<P>
&lt;$RCOUNT.<STRONG>variable</STRONG>=<STRONG>from</STRONG>:<STRONG>to</STRONG>[,<STRONG>step</STRONG>]&gt;



<P>
&lt;/$RCOUNT&gt;



<P>
Perform a classic variable iteration loop. All parameters are mandatory.

<LI>
<P>
&lt;<CODE>$REXIT</CODE>&gt;



<P>
Exit a template in the middle.

<LI>
<P>
&lt;$RENUMREQ.<STRONG>iterator variable</STRONG>=<STRONG>value variable</STRONG>&gt;



<P>
Iterate over all request parameters; each time having the first variable
contain the parameter name and the second contain the value.

<LI>
<P>
&lt;$RENUMQUERY.<STRONG>iterator variable</STRONG>=<STRONG>value variable</STRONG>&gt;



<P>
Iterate over all the columns of a query result. each time having the first
variable contain the column name and the second contain the data.

</UL>
<P>
<HR>
<H1><A NAME="FUNCTIONAL_TAGS">FUNCTIONAL TAGS</A></H1>
<UL>
<LI>
<P>
&lt;$RPIC.<STRONG>picture type</STRONG>(<STRONG>instruction set</STRONG>).'<STRONG>string</STRONG>'&gt;



<P>
&lt;$RPIC.F(<STRONG>char</STRONG>).'<STRONG>string</STRONG>'&gt;



<P>
Replace all white spaces by the given char. e.g., &lt;$RPIC.F(+).'Banana, a yellow energy bomb'&gt;
will yield: Banana,+a+yellow+energy+bomb and so on.

<P>
&lt;$RPIC.R(<STRONG>find</STRONG>=<STRONG>replace</STRONG>, ...).'<STRONG>string</STRONG>'&gt;



<P>
Replace tuples of string-to-find/string-to-replace in the given string.
e.g., &lt;$RPIC.R('na'='ta').'Banana'&gt; will yield Batata and so on.

<P>
&lt;$RPIC.N(<STRONG>width</STRONG>.<STRONG>fraction positions</STRONG>).'<STRONG>number</STRONG>'&gt;



<P>
Left space pad the number, with a fixed number of decimal places.

<P>
&lt;$RPIC.N(0&lt;width&gt;).'<STRONG>number</STRONG>'&gt;



<P>
Left zero pad the number, with a fixed number of decimal places.

<P>
(Hint, the instruction is equal to <EM>printf</EM>ing with %<STRONG>string</STRONG>f)

<P>
&lt;$RPIC.NZ(&lt;format&gt;).'<STRONG>number</STRONG>'&gt;



<P>
Substitute a blank for zero. (Mnemonic: zero suppress)

<P>
&lt;$RPIC.NF(&lt;format&gt;).'<STRONG>number</STRONG>'&gt;



<P>
After formatting the number, add commas.

<LI>
<P>
&lt;$RDECIDE.'<STRONG>perl code</STRONG>'?'<STRONG>string</STRONG>':'<STRONG>string</STRONG>'&gt;



<P>
Evaluates the code. If true, yields the first string, otherwise the second.

<LI>
<P>
&lt;$RMAIL.'<STRONG>From address</STRONG>','<STRONG>To address</STRONG>'[,'<STRONG>Subject</STRONG>']&gt; 

<P>
&lt;/$RMAIL&gt;



<P>
Send email, utilizing SMTP connection to localhost.

<LI>
<P>
&lt;$RPERL&gt; 

<P>
&lt;/$RPERL&gt;



<P>
Embed perl code. <CODE>print()</CODE> may be used.

<LI>
<P>
&lt;$RPERL.A&gt; 

<P>
&lt;$RPERL.B&gt; 

<P>
&lt;$RPERL.C&gt;



<P>
Documentation soon.

</UL>
<P>
<HR>
<H1><A NAME="SOURCE_TAGS">SOURCE TAGS</A></H1>
<UL>
<LI>
<P>
&lt;$REM.'<STRONG>string</STRONG>'&gt;



<P>
Add a server side comment.

<LI>
<P>
&lt;$RTRACE.'<STRONG>string</STRONG>'&gt;



<P>
Send a string to the log file.

<LI>
<P>
&lt;$RINCLUDE.'<STRONG>template name</STRONG>'&gt;



<P>
Include a template in compile time.

<LI>
<P>
&lt;$RWEBINCLUDE.'<STRONG>url</STRONG>'&gt;



<P>
Include an external web page in run time.

<LI>
<P>
&lt;$RSOURCE.'<STRONG>template</STRONG>'&gt;



<P>
&lt;/$RSOURCE&gt;



<P>
Generate an Anchor for a source view for a template. e.g,
&lt;$RSOURCE.'&lt;<CODE>$RTEMPLATE</CODE>&gt;'&gt;Click here to view the source for this template&lt;/$RSOURCE&gt;



</UL>
<P>
<HR>
<H1><A NAME="VARIABLE_TAGS">VARIABLE TAGS</A></H1>
<UL>
<LI>
<P>
&lt;$RVAR.<STRONG>variable</STRONG>&gt;



<P>
Dereferences a local variable, or a CGi variable. (Precedence to the
former).

<LI>
<P>
&lt;$RSET.<STRONG>variable</STRONG>='<STRONG>perl code</STRONG>'&gt;



<P>
Set a variable to the result of a perl code segment. CGI variables may be
overwritten.

<LI>
<P>
&lt;$RINC.<STRONG>variable</STRONG>&gt;



<LI>
<P>
&lt;$RINC.<STRONG>variable</STRONG>+<STRONG>number</STRONG>&gt;



<P>
&lt;$RINC.<STRONG>variable</STRONG>-<STRONG>number</STRONG>&gt;



<P>
Modify a variable.

<LI>
<P>
&lt;$RPSET.<STRONG>variable</STRONG>='<STRONG>perl code</STRONG>'&gt; 

<P>
&lt;$RPGET.<STRONG>variable</STRONG>&gt;



<P>
Store and retrive session variables. Must be configured in the
configuration file manually.

<LI>
<P>
&lt;$RPIMPORT.<STRONG>variable</STRONG>&gt;



<P>
Copy a persistent variable to a local variable, for faster retrieving.
Memory variables work much faster than session variables.

<LI>
<P>
&lt;$RPEXPORT.<STRONG>variable</STRONG>&gt;



<P>
Copy a regular variable to a persistent variable of the same name.

<LI>
<P>
&lt;<CODE>$RPCLEAR</CODE>&gt;



<P>
Erases all session variables.

<LI>
<P>
&lt;$RCFG.<STRONG>variable</STRONG>&gt;



<P>
Retrieve a variable from Merge configuration.

<LI>
<P>
&lt;$RCFGSET.<STRONG>variable</STRONG>='<STRONG>perl code</STRONG>'&gt;



<P>
Forge a temporary value instead of a configuration variable. Does <STRONG>NOT</STRONG> change the configuration file!

<LI>
<P>
&lt;$RCOOKIE.<STRONG>name</STRONG>&gt;



<P>
Retrieve a cookie.

<LI>
<P>
&lt;$RCOOKIESET.<STRONG>name</STRONG>='<STRONG>perl expression</STRONG>'&gt;



<P>
&lt;$RCOOKIESET.<STRONG>name</STRONG>='<STRONG>perl expression</STRONG>',<STRONG>minutes</STRONG>&gt;



<P>
&lt;$RCOOKIESET.<STRONG>name</STRONG>='<STRONG>perl expression</STRONG>',<STRONG>non numeric</STRONG>&gt;



<P>
Set a cookie using a HTTP-EQUIV &lt;META&gt; HTML tag. The notations are used for setting a permanent cookie, a cookie
with an expire date, and a temporary cookie that will disappear when the
browser exits.

</UL>
<P>
<HR>
<H1><A NAME="SECURITY_TAGS">SECURITY TAGS</A></H1>
<P>
These tags are impleneted only if the merge database exists.

<P>
IMPORTANT IMPORTANT IMPORTANT IMPORTANT IMPORTANT IMPORTANT IMPORTANT These
tags are to be used with the Merge security backend which is not written
yet. IMPORTANT IMPORTANT IMPORTANT IMPORTANT IMPORTANT IMPORTANT IMPORTANT 

<UL>
<LI>
<P>
&lt;$RLOGIN.'<STRONG>user</STRONG>','<STRONG>password</STRONG>'&gt;



<P>
Logs in. Tag outputs a boolean value to notify if login was successful or
failed.

<LI>
<P>
&lt;$RAUTH.'<STRONG>realm</STRONG>'&gt;



<P>
Check if the user has permission to a specific realm/key.

<LI>
<P>
&lt;$RCHPASS.'<STRONG>new password</STRONG>'&gt;



<P>
Change password for the logged in user.

<LI>
<P>
&lt;$RADDUSER.'<STRONG>user</STRONG>','<STRONG>password</STRONG>'&gt;



<P>
Add a new user. Use with CAUTION! Any user running the page could create a
user with this tag. If Merge is running on a user shell machine,
configuration and templates should be readable to the web server but not
world readable! Pages using &lt;<CODE>$RADDUSER</CODE>&gt; *must* be protected.

<LI>
<P>
&lt;$RDELUSER.'<STRONG>user</STRONG>'&gt;



<P>
Remove a user.

<LI>
<P>
&lt;$RJOIN.'<STRONG>user</STRONG>','<STRONG>group</STRONG>'&gt;



<P>
&lt;$RPART.'<STRONG>user</STRONG>','<STRONG>group</STRONG>'&gt;



<P>
Add a user to a group and remove a user from a group, accordingly.

<LI>
<P>
&lt;$RGRANT.U.'<STRONG>user</STRONG>','<STRONG>realm</STRONG>'&gt;



<P>
&lt;$RGRANT.G.'<STRONG>group</STRONG>','<STRONG>realm</STRONG>'&gt;



<P>
Grant a permission over a realm to a group or a user.

<LI>
<P>
&lt;$REVOKE.U.'<STRONG>user</STRONG>','<STRONG>realm</STRONG>'&gt;



<P>
&lt;$REVOKE.G.'<STRONG>group</STRONG>','<STRONG>realm</STRONG>'&gt;



<P>
Revoke a permission over a realm from a group or a user.

<LI>
<P>
&lt;$REQUIRE.'<STRONG>template name</STRONG>','<STRONG>list of possible realms</STRONG>'&gt;



<P>
Require users of a specific template to have access for at least one of the
templates in the list. (Comma separated)

<LI>
<P>
&lt;<CODE>$RUSER</CODE>&gt;



<P>
Yield the username of the currently logged in user.

<LI>
<P>
&lt;<CODE>$RNAME</CODE>&gt;



<P>
Yield the real name of the currently logged in user.

<LI>
<P>
&lt;<CODE>$RTAG</CODE>&gt;



<P>
Yield the tag string of the currently logged in user.

<LI>
<P>
&lt;$RATTACH.'<STRONG>template</STRONG>','<STRONG>subsite</STRONG>'&gt;



<P>
Attach a template to a subsite.

<LI>
<P>
&lt;$RDETACH.'<STRONG>template</STRONG>','<STRONG>subsite</STRONG>'&gt;



<P>
Detach a template from a subsite.

</UL>
<P>
<HR>
<H1><A NAME="DATE_TAGS">DATE TAGS</A></H1>
<UL>
<LI>
<P>
&lt;<CODE>$RDATE</CODE>&gt;



<P>
&lt;$RDATE,'<STRONG>number of days ahead</STRONG>'&gt;



<P>
Return the date as a YYMDHmS string. For example: 199912312359 is December
31, 1999, at one minute before midnight. The second parameter gives the
date for a few days ahead, or beyond, if given negative.

<LI>
<P>
&lt;$RDAY.'<STRONG>date</STRONG>'&gt;



<P>
&lt;$RMONTH.'<STRONG>date</STRONG>'&gt;



<P>
&lt;$RYEAR.'<STRONG>date</STRONG>'&gt;



<P>
Return the corresponding part of the date given.

<LI>
<P>
&lt;$RDATEDIFF.D.'<STRONG>earlier date</STRONG>','<STRONG>later date</STRONG>'&gt;



<P>
&lt;$RDATEDIFF.H.'<STRONG>earlier date</STRONG>','<STRONG>later date</STRONG>'&gt;



<P>
&lt;$RDATEDIFF.M.'<STRONG>earlier date</STRONG>','<STRONG>later date</STRONG>'&gt;



<P>
&lt;$RDATEDIFF.S.'<STRONG>earlier date</STRONG>','<STRONG>later date</STRONG>'&gt;



<P>
Return the difference between dates, in days, hours, minutes and seconds,
correspondingly.

<P>
&lt;$RLASTDAY.'<STRONG>date</STRONG>'&gt;



<P>
Give the last day of month related to the specific date.

<P>
&lt;$RADDDATE.'<STRONG>date</STRONG>','<STRONG>day</STRONG>','<STRONG>month</STRONG>','<STRONG>year</STRONG>'&gt;



<P>
Add the gievn number of days, then the given number of months and years to
the date. Returns a new date.

</UL>
<P>
<HR>
<H1><A NAME="FORM_AND_HTML_ENHANCEMENT_TAGS">FORM AND HTML ENHANCEMENT TAGS</A></H1>
<UL>
<LI>
<P>
&lt;$RSUBMIT[.'<STRONG>javascript validation code</STRONG>']&gt;



<P>
&lt;/$RSUBMIT&gt;



<P>
Create the HTML code for a POST form pointed at the same merge template it
is called from. An optional paramater is passed to the onSubmit attribute;
a typical value would be 'return <EM>function</EM>()' where <EM>function</EM>
returns a boolean value.

<LI>
<P>
&lt;$RTRANSFER.<STRONG>field name</STRONG>&gt;



<P>
Create a HIDDEN input tag, for the parameter with the corresponding name,
based on the values the server side parameter with the same name has.
Useful to transfer input fields among pages.

<LI>
<P>
&lt;$RMULTI.'<STRONG>iterator variable</STRONG>'='<STRONG>form field</STRONG>'&gt;



<P>
Iterate over multiple input form fields.

<LI>
<P>
&lt;<CODE>$RMERGE</CODE>&gt;



<P>
The name of the Merge CGI.

<LI>
<P>
&lt;<CODE>$RTEMPLATE</CODE>&gt;



<P>
The name of the current template.

</UL>
<P>
<HR>
<H1><A NAME="FILE_TAGS">FILE TAGS</A></H1>
<UL>
<LI>
<P>
&lt;$RGLOB.F.'<STRONG>iterator variable</STRONG>'='<STRONG>base directory or wildcards</STRONG>'&gt;



<P>
&lt;$RGLOB.D.'<STRONG>iterator variable</STRONG>'='<STRONG>base directory</STRONG>'&gt;



<P>
Iterate over a directory. Produces either files only or directories only,
accordingly.

<LI>
<P>
&lt;$RFTS.'<STRONG>iterator variable</STRONG>'='<STRONG>base directory</STRONG>'&gt;



<P>
Iterate over a subtree of files.

<LI>
<P>
&lt;$RDIVERT.'<STRONG>buffer name</STRONG>'&gt;

&lt;/$RDIVERT&gt;



<P>
Divert the output into a named buffer. Buffers are store in temporary files
and do not overlap between processes. Subsequent diverting is appended to
the existing buffer.

<P>
&lt;$RDUMP.'<STRONG>buffer name</STRONG>'&gt;



<P>
Dump the named buffer.

</UL>
<P>
<HR>
<H1><A NAME="SYNOPSIS">SYNOPSIS</A></H1>
<P>
<HR>
<H1><A NAME="DESCRIPTION">DESCRIPTION</A></H1>
</BODY>

</HTML>
